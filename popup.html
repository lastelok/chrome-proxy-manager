<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Proxy By LasT</title>
        <link rel="stylesheet" href="popup.css" />
    </head>
    <body>
        <div class="container">
            <!-- Заголовок с кнопками управления -->
            <div class="header">
                <h2>Proxy By LasT</h2>
                <div class="header-buttons">
                    <button id="openSidePanelBtn" class="icon-btn" title="Открыть в боковой панели">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" />
                            <line x1="15" y1="3" x2="15" y2="21" />
                        </svg>
                    </button>
                    <button id="openFullscreenBtn" class="icon-btn" title="Открыть на весь экран">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 3 21 3 21 9" />
                            <polyline points="9 21 3 21 3 15" />
                            <line x1="21" y1="3" x2="14" y2="10" />
                            <line x1="3" y1="21" x2="10" y2="14" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Статус подключения -->
            <div class="status-section">
                <div class="status-indicator" id="statusIndicator">
                    <span class="status-dot"></span>
                    <span class="status-text">Проверка...</span>
                </div>
                <button id="quickDisableBtn" class="quick-disable-btn hidden" title="Отключить прокси">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10" />
                        <line x1="15" y1="9" x2="9" y2="15" />
                        <line x1="9" y1="9" x2="15" y2="15" />
                    </svg>
                </button>
            </div>

            <!-- Список профилей (всегда видимый) -->
            <div class="profiles-section visible">
                <div class="profiles-header">
                    <h3>Профили прокси <span id="profilesCount" class="profiles-count"></span></h3>
                    <div class="btn-group">
                        <button id="importBtn" class="btn btn-small btn-secondary" title="Импорт прокси">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="7 10 12 15 17 10" />
                                <line x1="12" y1="15" x2="12" y2="3" />
                            </svg>
                            Импорт
                        </button>
                        <button id="exportBtn" class="btn btn-small btn-secondary" title="Экспорт прокси">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                                <polyline points="17 8 12 3 7 8" />
                                <line x1="12" y1="3" x2="12" y2="15" />
                            </svg>
                        </button>
                    </div>
                </div>
                <p class="profiles-hint">Нажмите на профиль для активации</p>
                <div id="profilesList" class="profiles-list"></div>
                <button id="addProfileBtn" class="btn btn-primary"><span class="icon">+</span> Добавить профиль</button>
            </div>

            <!-- Форма добавления/редактирования профиля -->
            <div id="profileForm" class="profile-form hidden">
                <h3 id="formTitle">Новый профиль</h3>
                <form id="proxyForm">
                    <input type="hidden" id="profileId" value="" />

                    <div class="form-group">
                        <label for="profileName">Название профиля:</label>
                        <input type="text" id="profileName" required placeholder="Мой прокси" />
                    </div>

                    <div class="form-group">
                        <label for="proxyHost">IP адрес:</label>
                        <input type="text" id="proxyHost" required placeholder="192.168.1.1" />
                    </div>

                    <div class="form-group">
                        <label for="proxyPort">Порт:</label>
                        <input type="number" id="proxyPort" required placeholder="8080" min="1" max="65535" />
                    </div>

                    <div class="form-group">
                        <label for="proxyUsername">Логин:</label>
                        <input type="text" id="proxyUsername" placeholder="username" />
                    </div>

                    <div class="form-group">
                        <label for="proxyPassword">Пароль:</label>
                        <input type="text" id="proxyPassword" placeholder="password" />
                    </div>

                    <div class="form-buttons">
                        <button type="submit" class="btn btn-success">Сохранить</button>
                        <button type="button" id="cancelBtn" class="btn btn-secondary">Отмена</button>
                    </div>
                </form>
            </div>

            <!-- Форма импорта -->
            <div id="importForm" class="import-form hidden">
                <h3>Импорт прокси</h3>
                <div class="import-info">
                    <p>Поддерживаемые форматы:</p>
                    <ul>
                        <li>user:pass@ip:port</li>
                        <li>ip:port:user:pass</li>
                        <li>user:pass:ip:port</li>
                        <li>ip:port (без авторизации)</li>
                        <li>Название: любой_формат</li>
                    </ul>
                </div>
                <textarea
                    id="importText"
                    placeholder="Введите прокси (по одному в строке)

Примеры:
user:pass@192.168.1.1:8080
192.168.1.1:8080:user:pass
Домашний: user:pass@10.0.0.1:3128
Рабочий: 192.168.0.1:8888"
                    rows="8"
                ></textarea>
                <div class="form-buttons">
                    <button id="processImportBtn" class="btn btn-success">Импортировать</button>
                    <button id="cancelImportBtn" class="btn btn-secondary">Отмена</button>
                </div>
            </div>

            <!-- Кнопка отключения прокси -->
            <div class="bottom-section">
                <button id="disableProxyBtn" class="btn btn-danger">Отключить прокси</button>
            </div>

            <!-- Модальное окно подтверждения -->
            <div id="confirmModal" class="modal hidden">
                <div class="modal-content">
                    <h3>Подтверждение</h3>
                    <p id="confirmMessage"></p>
                    <div class="modal-buttons">
                        <button id="confirmYes" class="btn btn-primary">Да</button>
                        <button id="confirmNo" class="btn btn-secondary">Нет</button>
                    </div>
                </div>
            </div>
        </div>

        <script src="popup.js"></script>
    </body>
</html>
